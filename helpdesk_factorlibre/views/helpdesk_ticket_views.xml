<?xml version='1.0' encoding='utf-8'?>
<odoo>

<record id="helpdesk_partner_tickets_action" model="ir.actions.act_window">
    <field name="name">Tickets</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">helpdesk.ticket</field>
    <field name="view_mode">tree,form</field> 
    <field name="domain">[('partner_id', '=', active_id)]</field>
</record>

<record id="helpdesk_ticket_action" model="ir.actions.act_window">
    <field name="name">Tickets</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">helpdesk.ticket</field>
    <field name="view_mode">tree,form</field>
</record>

<menuitem 
    id="helpdesk_ticket_main_menu" 
    name="Helpdesk" 
    sequence="16"
    action = "helpdesk_ticket_action"
/>

<record id="ticket_view_tree" model="ir.ui.view">
    <field name="name">helpdesk.ticket.view.form</field>
    <field name="model">helpdesk.ticket</field>
    <field name="arch" type="xml">
        <tree>
            <field name="name" />
            <field name="description" />
            <field name="assigned_date" />
            <field name="closed_date" />
            <field name="prioridad" />
            <field name="numero_ticket" />
        </tree>
    </field>
</record>

<record id="ticket_view_form" model="ir.ui.view">
    <field name="name">helpdesk.ticket.view.form</field>
    <field name="model">helpdesk.ticket</field>
    <field name="arch" type="xml">
        <form>
        <header>
            <button
                string="Assign me"
                name="assign_to_me"
                type="object"
                attrs="{'invisible': [('user_id','!=', False)]}"
            />
        </header>
        <sheet>
            <div class="oe_title">
                <h1 class="oe_title">
                    <field name="numero_ticket" />
                </h1>
                <h2 class="oe_row">
                    <field name="name" />
                </h2>
            </div>
            <group>
                <field name="description" />
            </group>
            <group>
                <group>
                    <field name="assigned_date" />
                    <field name="closed_date" />
                    <field name="partner_id" />
                    <field name="partner_name" />
                    <field name="partner_mail" />
                </group>
                <group>
                    <field name="user_id" />
                    <field name="prioridad" widget="priority" />
                    <field name="tag_ids" widget="many2many_tags" />
                </group>
            </group>
        </sheet>
        <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers"/>
            <field name="activity_ids" widget="mail_activity"/>
            <field name="message_ids" widget="mail_thread"/>
        </div>
        </form>
    </field>
</record>
</odoo>